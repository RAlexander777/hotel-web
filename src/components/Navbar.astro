---
import "../styles/navbar.css";

// Recibimos las props como antes
const { isIndex = false } = Astro.props;

// OBTENEMOS LA RUTA ACTUAL DE LA PÁGINA
const pathname = Astro.url.pathname;
---
<header
    x-data=`{
        scrolled: false,
        mobileMenuOpen: false,
        isIndexPage: ${isIndex},
        showLogo: ${!isIndex},
        init() {
            // ... toda tu lógica de Alpine.js se mantiene igual ...
            window.addEventListener('scroll', () => {
                this.scrolled = window.scrollY > 50;
            });
            if (this.isIndexPage) {
                window.addEventListener('scroll', () => {
                    const heroHeight = window.innerHeight;
                    if (window.scrollY > heroHeight - 80) {
                        this.showLogo = true;
                    } else {
                        this.showLogo = false;
                    }
                });
            }
        }
    }`
    :class="{ 'navbar-scrolled': scrolled }"
    class="custom-navbar"
>
    <div class="navbar-container">
        <div class="logo" :class="{ 'logo-visible': showLogo }">
            <a href="/hotel-web/">
                <img src="/hotel-web/images/logo.png" alt="Hostal Acuarius Logo" class="logo-img" />
            </a>
        </div>

        <nav class="desktop-nav">
            <a href="/hotel-web/nosotros" class:list={{ active: pathname.includes('/nosotros') }}>Nosotros</a>
            <a href="/hotel-web/habitaciones" class:list={{ active: pathname.includes('/habitaciones') }}>Habitaciones</a>
            <a href="/hotel-web/tours" class:list={{ active: pathname.includes('/tours') }}>Tours</a>
            <a href="/hotel-web/contacto" class:list={{ active: pathname.includes('/contacto') }}>Contacto</a>
        </nav>

        <div class="navbar-actions">
            <a href="/hotel-web/reserva" class="btn btn-nav">Reserva Ahora</a>
            <button class="hamburger" @click="mobileMenuOpen = !mobileMenuOpen" aria-label="Abrir menú">
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
            </button>
        </div>
    </div>

    <div class="mobile-menu" x-show="mobileMenuOpen" @click.outside="mobileMenuOpen = false" x-transition>
        <nav>
            <a href="/hotel-web/nosotros" @click="mobileMenuOpen = false" class:list={{ active: pathname.includes('/nosotros') }}>Nosotros</a>
            <a href="/hotel-web/habitaciones" @click="mobileMenuOpen = false" class:list={{ active: pathname.includes('/habitaciones') }}>Habitaciones</a>
            <a href="/hotel-web/tours" @click="mobileMenuOpen = false" class:list={{ active: pathname.includes('/tours') }}>Tours</a>
            <a href="/hotel-web/contacto" @click="mobileMenuOpen = false" class:list={{ active: pathname.includes('/contacto') }}>Contacto</a>
            <a href="/hotel-web/reserva" class="btn-reserva-mobile">Reserva Ahora</a>
        </nav>
    </div>
</header>