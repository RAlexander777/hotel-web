---
import "../styles/navbar.css";

const { isIndex = false } = Astro.props;
---
<header
    x-data=`{
        scrolled: false,
        mobileMenuOpen: false,
        isIndexPage: ${isIndex},
        showLogo: ${!isIndex},
        init() {
            // Lógica para el fondo del navbar (se aplica a todas las páginas)
            window.addEventListener('scroll', () => {
                this.scrolled = window.scrollY > 50;
            });

            // Lógica especial para mostrar/ocultar el logo SÓLO en el index
            if (this.isIndexPage) {
                window.addEventListener('scroll', () => {
                    // El hero del index ocupa el 100% de la altura de la ventana (100vh)
                    const heroHeight = window.innerHeight; 
                    
                    // Si el scroll ha pasado la altura del hero, muestra el logo
                    if (window.scrollY > heroHeight - 80) { // 80 es la altura del navbar
                        this.showLogo = true;
                    } else {
                        this.showLogo = false;
                    }
                });
            }
        }
    }`
    :class="{ 'navbar-scrolled': scrolled }"
    class="custom-navbar"
>
    <div class="navbar-container">
        <div class="logo" :class="{ 'logo-visible': showLogo }">
            <a href="/hotel-web/">
                <img src="/hotel-web/images/logo.png" alt="Hostal Acuarius Logo" class="logo-img" />
            </a>
        </div>

        <nav class="desktop-nav">
            <a href="/hotel-web/nosotros">Nosotros</a>
            <a href="/hotel-web/habitaciones">Habitaciones</a>
            <a href="/hotel-web/tours">Tours</a>
            <a href="/hotel-web/contacto">Contacto</a>
        </nav>

        <div class="navbar-actions">
            <a href="/reserva" class="btn btn-nav">Reserva Ahora</a>
            
            <button class="hamburger" @click="mobileMenuOpen = !mobileMenuOpen" aria-label="Abrir menú">
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
                <span :class="{ 'toggled': mobileMenuOpen }"></span>
            </button>
        </div>
    </div>

    <div class="mobile-menu" x-show="mobileMenuOpen" @click.outside="mobileMenuOpen = false" x-transition>
        <nav>
            <a href="/hotel-web/nosotros" @click="mobileMenuOpen = false">Nosotros</a>
            <a href="/hotel-web/habitaciones" @click="mobileMenuOpen = false">Habitaciones</a>
            <a href="/hotel-web/tours" @click="mobileMenuOpen = false">Tours</a>
            <a href="/hotel-web/contacto" @click="mobileMenuOpen = false">Contacto</a>
            <a href="/reserva" class="btn-reserva-mobile">Reserva Ahora</a>
        </nav>
    </div>
</header>